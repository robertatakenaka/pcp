<?xml version="1.0" encoding="UTF-8"?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" >	<!--		1. Vieira AML, Souza CE, Labruna MB, Mayo RC, Souza SSL, Camargo-Neves VLF. Manual de vigilância acarológica, Estado de São Paulo. São Paulo: Secretaria de Estado da Saúde de São Paulo; 2004.2. Roux V, Rydkina E, Eremeeva M, Raoult D. Citrate synthase gene comparison, a new tool for phylogenetic analysis and its application for the Rickettsiae. Int J Syst Bacteriol 1997; 47:252-61.		-->	<!--		Genericos	-->	<xsl:output indent="no" method="text" encoding="iso-8859-1" />	<xsl:template match="*">[<xsl:value-of select="name()"/>]<xsl:apply-templates/>[/<xsl:value-of select="name()"/>]</xsl:template>	<!--		Unknown	-->	<!--		Reference list	-->	<xsl:template match="insert-main-tag"/>	<xsl:template match="ref-list">		<xsl:variable name="count" select="count(.//ref) + count(.//unknown)"/>		<xsl:if test="$count &gt;0">		<xsl:if test="insert-main-tag">[vancouv standard="vancouv" count="<xsl:value-of select="$count"/>"]</xsl:if>		<xsl:apply-templates select="ref"/>				<xsl:if test="insert-main-tag">[/vancouv]</xsl:if>		</xsl:if>		<xsl:text>		</xsl:text>	</xsl:template>	<!--		Reference 	-->	<xsl:template match="ref">[vcitat]<xsl:apply-templates select="originalRef"/><xsl:apply-templates select="@*|*[name()!='originalRef']|text()"/>[/vcitat]</xsl:template>	<xsl:template match="ref[@status='unknown']">[vcitat]<xsl:value-of select="normalize-space(citation)"/>[/vcitat]</xsl:template>	<!--		Label	-->	<xsl:template match="ref/label|*/label">[no]<xsl:apply-templates/>[/no].	</xsl:template>	<xsl:template match="ref[not(label)]/@id">[no]<xsl:value-of select="substring-after(.,'R')"/>[/no].	</xsl:template>	<!--		Citation	-->	<xsl:template match="citation|nlm-citation"><xsl:apply-templates/></xsl:template>	<!--		Citation Journal	-->	<xsl:template match="*[@citation-type='journal']">[vcontrib]<xsl:apply-templates select="person-group | collab"/>		<xsl:apply-templates select="article-title"/>	[/vcontrib].	[viserial]		<xsl:apply-templates select="*[name()!='person-group' and name()!='collab' and name()!='article-title' and name()!='subtitle']"/>	[/viserial].</xsl:template>	<!--		Citation Book				10. Associação Brasileira de Normas Técnicas. Gravidade das lesões sofridas por vítimas de acidentes de trânsito – NBR 6061. São Paulo: Associação Brasileira de Normas Técnicas; 1980.<nlm-citation citation-type="book">			<collab collab-type="author">Associação Brasileira de Normas Técnicas</collab>			<source>Gravidade das lesões sofridas por vítimas de acidentes de trânsito - NBR 6061.</source>			<year>1980</year>			<publisher-loc>São Paulo</publisher-loc>			<publisher-name>Associação Brasileira de Normas Técnicas</publisher-name>		</nlm-citation>	-->	<xsl:template match="*[@citation-type='book']">[vmonog]<xsl:apply-templates select="*[name()!='year']"/>		<xsl:apply-templates select="year"/>[/vmonog].</xsl:template>	<xsl:template match="*[@citation-type='book' and article-title]">		<xsl:variable name="person" select="person-group[@person-group-type='author']"/>		<xsl:variable name="first" select="$person[1]"/>		<xsl:variable name="sec" select="$person[2]"/>		<xsl:variable name="col" select="collab[@collab-type='author']"/>		<xsl:variable name="firstcol" select="$col[1]"/>		<xsl:variable name="seccol" select="$col[2]"/>[vcontrib]<xsl:apply-templates select="$first | $firstcol"/>		<xsl:apply-templates select="article-title"/>[/vcontrib].[vmonog]<xsl:apply-templates select="$sec | $seccol | person-group[@person-group-type!='author'] | collab[@collab-type!='author']"/>		<xsl:apply-templates select="*[name()!='year' and name()!='person-group' and name()!='collab' and name()!='article-title' and name()!='subtitle' ]"/>		<xsl:apply-templates select="year"/>[/vmonog].</xsl:template>	<!-- 		THESIS 				[vcitat][no]15[/no]. [vmonog][author role=nd][surname]Pereira[/surname] [fname]SA[/fname][/author]. 				[vtitle][title language=pt]Modos de gerenciar cuidado e serviço no Programa Saúde da Família em Belo Horizonte[/title] [/vtitle]		[thesis]&#091;[degree]dissertação[/degree]&#093;. [city]Belo Horizonte [/city]([state]MG[/state]): 		[orgdiv]Escola de Enfermagem[/orgdiv], [orgname]Universidade Federal de Minas Gerais[/orgname]; 		[date dateiso="20050000"]2005[/date][/thesis].[/vmonog][/vcitat]	-->	<xsl:template match="*[@citation-type='thesis']">[vmonog]<xsl:apply-templates select="person-group[@person-group-type='author'] | collab[@collab-type='author']"/>. <xsl:apply-templates select="source" /> 		[thesis][degree]<xsl:value-of select="substring-before(substring-after(../originalRef/text(), 'MARKUP_91'),'MARKUP_93')"/>[/degree]<xsl:apply-templates select="*[name()!='year' and name()!='person-group' 	and name()!='collab' and name()!='article-title' and name()!='source']"/>			<xsl:apply-templates select="year"/>		[/thesis][/vmonog].</xsl:template>	<!---->	<xsl:template match="*[@citation-type='book' and contains(../originalRef/text(),'tese') or contains(../originalRef/text(),'issertação')]">[vmonog]<xsl:apply-templates select="person-group[@person-group-type='author'] | collab[@collab-type='author']"/>. <xsl:apply-templates select="source" /> 		[thesis][degree]<xsl:choose>				<xsl:when test="contains(../originalRef/text(),'livre docência')">tese livre docência</xsl:when>				<xsl:when test="contains(../originalRef/text(),'tese')">tese</xsl:when>				<xsl:when test="contains(../originalRef/text(),'issertação')">dissertação</xsl:when>			</xsl:choose>[/degree]<xsl:apply-templates select="*[name()!='year' and name()!='person-group' and name()!='collab' and name()!='article-title' and name()!='source']"/>			<xsl:apply-templates select="year"/>		[/thesis][/vmonog].</xsl:template>	<!--		AUTHORS		-->	<xsl:template match="person-group">		<xsl:variable name="role">			<xsl:choose>				<xsl:when test="@person-group-type='editor'">ed</xsl:when>				<xsl:when test="@person-group-type='translator'">tr</xsl:when>				<xsl:when test="@person-group-type='author'">nd</xsl:when>				<xsl:when test="@person-group-type='organizer'">org</xsl:when>				<xsl:otherwise>nd</xsl:otherwise>			</xsl:choose>		</xsl:variable>		<xsl:apply-templates>			<xsl:with-param name="role" select="$role"/>		</xsl:apply-templates>	</xsl:template>	<xsl:template match="etal">		[et-al]et al[/et-al].<xsl:call-template name="space"/>	</xsl:template>	<xsl:template match="name">		<xsl:param name="role"/>		[author role="<xsl:value-of select="$role"/>"]<xsl:apply-templates/>[/author]<xsl:choose>			<xsl:when test="position()=last() and not(../etal)">.</xsl:when>			<xsl:otherwise>,<xsl:call-template name="space"/>			</xsl:otherwise>		</xsl:choose>	</xsl:template>	<xsl:template match="given-names">		<xsl:call-template name="space"/>[fname]<xsl:apply-templates/>[/fname]</xsl:template>	<!--		CORPORATIVE AUTHORS		-->	<xsl:template match="collab">		[corpauth][orgname]<xsl:apply-templates/>[/orgname][/corpauth]<xsl:choose>			<xsl:when test="position()=last() and not(../etal)">.</xsl:when>			<xsl:otherwise>,<xsl:call-template name="space"/>			</xsl:otherwise>		</xsl:choose>	</xsl:template>	<!--		TITLE		-->	<xsl:template match="*[@citation-type='journal']/source">[vstitle][stitle]<xsl:apply-templates/>[/stitle][/vstitle]</xsl:template>		<xsl:template match="article-title | *[@citation-type!='journal']/source">		[vtitle][title language="<xsl:apply-templates select="." mode="language"/>"]<xsl:choose>			<xsl:when test="contains(text(),'(') and (contains(../..//originalRef/text(),'tese') or contains(../..//originalRef/text(),'issertação'))"><xsl:value-of select="substring-before(.,'(')"/></xsl:when>			<xsl:when test="substring(.,string-length(),1)='.'"><xsl:value-of select="substring(.,1,string-length()-1)"/></xsl:when>			<xsl:otherwise>	<xsl:apply-templates/></xsl:otherwise>		</xsl:choose>[/title]<xsl:apply-templates select="../subtitle"/>[/vtitle]<xsl:choose>			<xsl:when test="../@citation-type='book'">. </xsl:when>			<xsl:otherwise/>		</xsl:choose>	</xsl:template>		<xsl:template match="article-title | *[@citation-type!='journal']/source">		[vtitle][title language="<xsl:apply-templates select="." mode="language"/>"]<xsl:apply-templates select="." mode="content"/>[/vtitle]</xsl:template>	<xsl:template match="article-title | source" mode="content">		<xsl:variable name="x"><xsl:choose>			<xsl:when test="contains(../..//originalRef/text(),'tese') or contains(../..//originalRef/text(),'issertação')"><xsl:value-of select="substring-before(.,'(')"/></xsl:when>			<xsl:otherwise><xsl:value-of select="."/></xsl:otherwise>		</xsl:choose></xsl:variable>		<xsl:variable name="x1"><xsl:choose>			<xsl:when test="substring($x,string-length($x),1)='.'"><xsl:value-of select="substring($x,1,string-length($x)-1)"/></xsl:when>			<xsl:otherwise><xsl:value-of select="$x"/></xsl:otherwise>		</xsl:choose></xsl:variable>		<xsl:variable name="x2"><xsl:choose>			<xsl:when test="contains($x1,':')"><xsl:value-of select="substring-before($x1,':')"/></xsl:when>			<xsl:otherwise><xsl:value-of select="$x1"/></xsl:otherwise>		</xsl:choose></xsl:variable>		<xsl:variable name="x3"><xsl:choose>			<xsl:when test="contains($x1,':')"><xsl:value-of select="substring-after($x1,':')"/></xsl:when>			<xsl:when test="../subtitle"><xsl:value-of select="../subtitle"/></xsl:when>		</xsl:choose></xsl:variable><xsl:value-of select="$x2"/>[/title]<xsl:if test="string-length($x3)&gt;0">[subtitle]<xsl:value-of select="$x3"/>[/subtitle]</xsl:if></xsl:template>		<!-- 		DATE	-->	<xsl:template match="year"> [date dateiso="<xsl:value-of select="."/>		<xsl:apply-templates select="../month"/>		<xsl:apply-templates select="../day"/>		<xsl:if test="not(../month)">00</xsl:if>		<xsl:if test="not(../day)">00</xsl:if>"]<xsl:apply-templates select="../year | ../month | ../day" mode="pub-date"/>[/date]<xsl:choose>			<xsl:when test="../@citation-type='book'"> </xsl:when>			<xsl:when test="../@citation-type='journal'">;</xsl:when>			<xsl:otherwise/>		</xsl:choose>	</xsl:template>	<xsl:template match="* | text()" mode="pub-date"/>	<xsl:template match="month|day"/>	<xsl:template match="year|month|day" mode="pub-date">		<xsl:apply-templates/>	</xsl:template>	<xsl:template match="*[year|month|day]" mode="pub-date">		<xsl:apply-templates select="year|month|day"/>	</xsl:template>	<!-- 		publisher-loc	-->	<xsl:template match="publisher-loc">		[city]<xsl:apply-templates/>[/city]:<xsl:call-template name="space"/>	</xsl:template>	<xsl:template match="publisher-loc[contains(text(),'(')]">		[city]<xsl:value-of select="substring-before(text(),'(')"/>[/city]([country]<xsl:value-of select="substring-after(substring-before(text(),')'),'(')"/>[/country]):<xsl:call-template name="space"/>	</xsl:template>	<xsl:template match="publisher-loc[contains(text(),'(') and string-length(substring-after(substring-before(text(),')'),'('))=2]">		[city]<xsl:value-of select="substring-before(text(),'(')"/>[/city]([state]<xsl:value-of select="substring-after(substring-before(text(),')'),'(')"/>[/state]):<xsl:call-template name="space"/>	</xsl:template>	<!-- 		pubname	-->	<xsl:template match="publisher-name">		[pubname]<xsl:apply-templates/>[/pubname];<xsl:call-template name="space"/>	</xsl:template>	<xsl:template match="*[@citation-type='thesis']/publisher-name | *[@citation-type='book' and contains(../originalRef/text(),'tese') or contains(../originalRef/text(),'issertação') ]/publisher-name">		<xsl:apply-templates select="." mode="thesis"/>	</xsl:template>	<xsl:template match="publisher-name" mode="thesis">		[orgname]<xsl:apply-templates/>[/orgname];<xsl:call-template name="space"/>	</xsl:template>	<xsl:template match="publisher-name[contains(.,',')]" mode="thesis">		[orgdiv]<xsl:value-of select="substring-before(.,',')"/>[/orgdiv], [orgname]<xsl:value-of select="substring-after(.,',')"/>[/orgname];<xsl:call-template name="space"/>	</xsl:template>	<!-- 		volid	-->	<xsl:template match="volume">		[volid]<xsl:apply-templates/>[/volid]<xsl:if test="not(../supplement)">:</xsl:if>		<xsl:call-template name="space"/>	</xsl:template>	<!-- 		issueno	-->	<xsl:template match="issue">		[issueno]<xsl:apply-templates/>[/issueno]	</xsl:template>	<xsl:template match="issue[contains(text(),'Suppl')]"><xsl:if test="substring-before(.,'Suppl')!=''">[issueno]<xsl:value-of select="substring-before(.,'Suppl')"/>[/issueno]</xsl:if>		[suppl]<xsl:value-of select="substring-after(text(),'Suppl')"/><xsl:if test="substring-after(text(),'Suppl')='' or substring-after(text(),'Suppl')=' '">Suppl</xsl:if>[/suppl]</xsl:template>	<xsl:template match="issue[text()='suppl' or text()='Suppl']">		[suppl]<xsl:value-of select="text()"/>[/suppl]</xsl:template>	<!-- 		suppl	-->	<xsl:template match="supplement">		[suppl]<xsl:apply-templates/>[/suppl]</xsl:template>	<!-- 		pages	-->	<xsl:template match="lpage"/>	<xsl:template match="fpage">		[pages]<xsl:value-of select="."/>		<xsl:if test="../lpage">-<xsl:value-of select="../lpage"/>		</xsl:if>[/pages]</xsl:template>	<xsl:template match="page-range">		[pages]<xsl:apply-templates/>[/pages]</xsl:template>	<!-- 		pmid, doi	-->	<xsl:template match="pub-id">[<xsl:value-of select="@pub-id-type"/>]<xsl:apply-templates/>[/<xsl:value-of select="@pub-id-type"/>]	</xsl:template>	<!-- 		LANGUAGE			-->	<xsl:template match="*" mode="language">		<xsl:choose>			<xsl:when test="@xml:lang and @xml:lang!=''">				<xsl:value-of select="@xml:lang"/>			</xsl:when>			<xsl:otherwise>				<xsl:choose>					<xsl:when test="contains(.,' the ') or contains(.,' of ')">en</xsl:when>					<xsl:when test="contains(.,'ã') or contains(.,'õ')">pt</xsl:when>					<xsl:when test="contains(.,'ñ') or contains(.,' el ') or contains(.,' la ') or contains(.,' los ') or contains(.,' las ')">es</xsl:when>					<xsl:otherwise>en</xsl:otherwise>				</xsl:choose>			</xsl:otherwise>		</xsl:choose>	</xsl:template>	<xsl:template match="annotation"/>	<xsl:template name="space"> </xsl:template>	<xsl:template name="p">	<xsl:text>	</xsl:text>	</xsl:template>	<xsl:template match="originalRef">[text-ref]<xsl:value-of select="."/>[/text-ref]	</xsl:template>	<xsl:template name="enter"/>	<xsl:template match="subtitle">[subtitle]<xsl:apply-templates/>[/subtitle]</xsl:template></xsl:stylesheet>